/* ==== ADD OR MODIFY IN YOUR style.css ==== */

/* --- General Visibility & Transitions --- */
body {
    opacity: 0; /* Start hidden */
    transition: opacity 0.5s ease-in-out;
}
body.loaded {
    opacity: 1;
}

.visually-hidden { /* Ensure you have a robust visually-hidden class */
    position: absolute !important;
    height: 1px; width: 1px;
    overflow: hidden;
    clip: rect(1px, 1px, 1px, 1px);
    white-space: nowrap; /* added */
    border: 0; /* added */
    margin: -1px; /* added */
    padding: 0; /* added */
    opacity: 0; /* Add opacity for transition */
}


/* --- Cookie Image Header Transition --- */
#cookie-image-header {
    max-height: 500px; /* Adjust as needed */
    overflow: hidden;
    opacity: 0;
    transition: opacity 0.6s ease, max-height 0.6s ease, margin-bottom 0.6s ease;
    margin-bottom: 0; /* Collapse margin when hidden */
    border-radius: 8px; /* Match other sections */
}
#cookie-image-header.visible {
    opacity: 1;
    max-height: 500px; /* Should be larger than actual height */
    margin-bottom: 25px; /* Restore margin when visible */
}
#cookie-image-header img {
    display: block; /* Prevent extra space below image */
    width: 100%;
    height: auto; /* Maintain aspect ratio */
    max-height: 40vh; /* Limit height */
    object-fit: cover; /* Cover the area nicely */
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}


/* --- Key Differences Transition (Ensure these match your provided CSS) --- */
.key-differences-container {
    background-color: var(--key-diff-bg);
    border: 1px dashed var(--secondary-color);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 30px;
    opacity: 1;
    transition: opacity 0.5s ease, max-height 0.5s ease, padding 0.5s ease, margin 0.5s ease, border 0.5s ease; /* Added more properties */
    max-height: 1000px; /* Generous max-height for content */
    overflow: hidden;
}
.key-differences-container.visually-hidden {
    opacity: 0 !important; /* Use important if needed to override */
    max-height: 0 !important;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
    border-width: 0 !important; /* Hide border smoothly */
    /* Keep position: static or relative as needed by layout */
     overflow: hidden; /* Ensure content clip */
}


/* --- Omar's Fav Bubble Transition --- */
#omar-fav-bubble {
    display: inline-block; /* Or block depending on desired layout */
    position: absolute; /* Example positioning */
    top: 10px;
    right: 10px; /* Adjust as needed */
    background-color: var(--accent-thick); /* Match theme */
    color: white;
    padding: 5px 12px;
    border-radius: 15px 0 0 15px;
    font-size: 0.85em;
    font-weight: bold;
    opacity: 0;
    transform: translateX(20px) scale(0.8);
    transition: opacity 0.4s ease, transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    z-index: 10; /* Keep above other elements */
     pointer-events: none; /* Prevent interaction unless needed */
}
#omar-fav-bubble.visible {
    opacity: 1;
    transform: translateX(0) scale(1);
}


/* --- Easter Egg Transition --- */
#easter-egg-container {
    background-color: var(--highlight-bg); /* Match other sections or use unique style */
    border: 2px dashed var(--accent-thick); /* Example border */
    border-radius: 8px;
    padding: 20px;
    margin-top: 30px; /* Spacing from recipe */
    opacity: 0;
    max-height: 0;
    overflow: hidden;
    transition: opacity 0.6s ease, max-height 0.6s ease, padding 0.6s ease, margin 0.6s ease, border 0.6s ease;
    /* display: none; /* Initially hidden, JS will change to block */
}

#easter-egg-container.visible {
    opacity: 1;
    max-height: 1500px; /* Generous height for content */
    padding: 20px; /* Restore padding */
    margin-top: 30px; /* Restore margin */
    border-width: 2px; /* Restore border */
     /* display: block; JS should handle this */
}
#easter-egg-container img#stuffed-cookie-image {
    display: block;
    max-width: 90%; /* Responsive */
    width: 350px; /* Max width */
    height: auto;
    margin: 15px auto; /* Center */
    border-radius: 6px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.15);
}
/* Add other styles for Easter Egg content (h4, p, links) as needed */
.pistachio-link a {
    font-weight: bold;
    color: #4CAF50; /* Greenish for pistachio */
}
.pistachio-link a:hover {
    text-decoration: underline;
}

/* --- Adjust List Paddings for RTL --- */
body[dir="rtl"] .ingredient-list li,
body[dir="rtl"] .steps-list li,
body[dir="rtl"] #tips-list li {
    padding-inline-start: initial; /* Reset default */
    padding-inline-end: 35px; /* Apply padding to the right */
}

body[dir="rtl"] .ingredient-list li::before,
body[dir="rtl"] .steps-list li::before,
body[dir="rtl"] #tips-list li::before {
    inset-inline-start: initial; /* Reset default */
    inset-inline-end: 5px; /* Position icon/counter to the right */
}

/* Ensure highlight/critical spans work in RTL */
body[dir="rtl"] .highlight, body[dir="rtl"] .critical {
    /* Usually display:inline or inline-block, should work fine */
}
